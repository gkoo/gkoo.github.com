// HUMAN-FRIENDLY SOURCE AVAILABLE AT github.com/gkoo/gkoo.github.com
var addClass=function(a,b){0>a.className.indexOf(b)&&(0<a.className.length&&(a.className+=" "),a.className+=b)},removeClass=function(a,b){var c=a.className.split(" "),d,e;for(d=0,e=c.length;d<e;++d)if(c[d]===b){c.splice(d,1);break}a.className=c.join(" ")},hasClass=function(a,b){return-1!=a.className.indexOf(b)},ContentView=function(){return{el:document.getElementById("content"),initialize:function(){_.extend(this,Backbone.Events);this.showSection=this.showSection.bind(this);this.hide=this.hide.bind(this);
this.goHome=this.goHome.bind(this);this.id=this.el.getAttribute("id");this.homeBtn=document.querySelector(".homeBtn");this.homeBtn.addEventListener("click",this.goHome);return this},showSection:function(a){a=document.querySelector("#"+this.id+" ."+a);this.el.style.display="block";addClass(a,"show");addClass(this.homeBtn,"show")},hide:function(){var a=document.querySelector(".section.show");a&&removeClass(a,"show");removeClass(this.el,"show");this.el.style.display="none";removeClass(this.homeBtn,"show")},
goHome:function(a){a.preventDefault();eventManager.trigger("navigate",{section:"",push:!0})}}.initialize()},NavView=function(){return{el:document.getElementById("sectionBtnWrapper"),initialize:function(){var a=this.el;_.extend(this,Backbone.Events);this.goToSection=this.goToSection.bind(this);this.hide=this.hide.bind(this);this.show=this.show.bind(this);this.id=a.getAttribute("id");this.el.addEventListener("click",this.goToSection);setTimeout(function(){addClass(a,"loaded")},100);return this},goToSection:function(a){var b=
a.target,c;if(!hasClass(b,"title"))c=b.parentElement,hasClass(c,"title")&&(b=c);a.preventDefault();a=b.getAttribute("data-section");eventManager.trigger("navigate",{section:a,push:!0})},show:function(){removeClass(this.el,"faded");this.fadingTimeout=window.setTimeout(function(){removeClass(this.el,"fading")}.bind(this),20)},hide:function(a){addClass(this.el,"fading");this.fadingTimeout=window.setTimeout(function(){addClass(this.el,"faded")}.bind(this),a)}}.initialize()},eventManager=function(){_.extend(this,
Backbone.Events);return this}(),historyManager=function(){_.extend(this,Backbone.Events);window.addEventListener("popstate",function(a){a&&a.state&&a.state.section&&(a="home"===a.state.section?"":a.state.section,eventManager.trigger("navigate",{section:a,push:!1}))});this.initialize=function(a,b){history.replaceState({section:a},"gordon koo",b)};this.navigateTo=function(a){var b=a?a:"/";history.pushState({section:a||"home"},"gordon koo",b)};this.hasPushState="undefined"!==typeof history.pushState;
return this}(),Homepage=function(a){this.sectionBtnWrapper=document.getElementById("sectionBtnWrapper");this.changeSection=function(a){var c=a.section,a=a.push;historyManager.hasPushState?(c?(this.navView.hide(400),setTimeout(function(){this.contentView.showSection(c)}.bind(this),400)):(this.contentView.hide(),this.navView.show()),a&&historyManager.navigateTo(c)):window.location=c?c:"/"}.bind(this);this.init=function(){var b="home"===a?"/":"/"+a;this.navView=new NavView;this.contentView=new ContentView;
historyManager.initialize(a,b);eventManager.bind("navigate",this.changeSection)};this.init()};if("undefined"===typeof Function.bind)Function.prototype.bind=function(a){var b=this;return function(){var c=Array.prototype.slice.call(arguments);return b.apply(a||null,c)}};document.body.onload=function(){"undefined"===typeof currPage&&(currPage="home");new Homepage(currPage)};
