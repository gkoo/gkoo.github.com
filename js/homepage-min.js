// HUMAN-FRIENDLY SOURCE AVAILABLE AT github.com/gkoo/gkoo.github.com
var addClass=function(a,b){if(a.className.indexOf(b)<0){if(a.className.length>0){a.className+=" "}a.className+=b}},removeClass=function(e,b){var d=e.className.split(" "),c,a;for(c=0,a=d.length;c<a;++c){if(d[c]===b){d.splice(c,1);break}}e.className=d.join(" ")},hasClass=function(b,a){return(b.className.indexOf(a)!=-1)},ContentView=function(){var a={el:document.getElementById("content"),initialize:function(){_.extend(this,Backbone.Events);this.showSection=this.showSection.bind(this);this.hide=this.hide.bind(this);this.goHome=this.goHome.bind(this);this.id=this.el.getAttribute("id");this.homeBtn=document.querySelector(".homeBtn");this.homeBtn.addEventListener("click",this.goHome);return this},showSection:function(c){var b=document.querySelector("#"+this.id+" ."+c);this.el.style.display="block";addClass(b,"show");addClass(this.homeBtn,"show")},hide:function(){var c=document.querySelector(".section.show"),d,b;if(c){removeClass(c,"show")}removeClass(this.el,"show");this.el.style.display="none";removeClass(this.homeBtn,"show")},goHome:function(b){b.preventDefault();eventManager.trigger("navigate",{section:"",push:true})}};return a.initialize()},NavView=function(){var a={el:document.getElementById("sectionBtnWrapper"),initialize:function(){var b=this.el;_.extend(this,Backbone.Events);this.goToSection=this.goToSection.bind(this);this.hide=this.hide.bind(this);this.show=this.show.bind(this);this.id=b.getAttribute("id");this.el.addEventListener("click",this.goToSection);setTimeout(function(){addClass(b,"loaded")},100);return this},goToSection:function(b){var e=b.target,c,d;if(!hasClass(e,"title")){c=e.parentElement;if(hasClass(c,"title")){e=c}}b.preventDefault();d=e.getAttribute("data-section");eventManager.trigger("navigate",{section:d,push:true})},show:function(){removeClass(this.el,"faded");this.fadingTimeout=window.setTimeout((function(){removeClass(this.el,"fading")}).bind(this),20)},hide:function(b){addClass(this.el,"fading");this.fadingTimeout=window.setTimeout((function(){addClass(this.el,"faded")}).bind(this),b)}};return a.initialize()},eventManager=(function(){_.extend(this,Backbone.Events);return this})(),historyManager=(function(){_.extend(this,Backbone.Events);window.addEventListener("popstate",function(a){var b;if(a&&a.state&&a.state.section){b=a.state.section==="home"?"":a.state.section;eventManager.trigger("navigate",{section:b,push:false})}});this.initialize=function(a,b){history.replaceState({section:a},"gordon koo",b)};this.navigateTo=function(b){var a=b?b+".html":"/";b=b||"home";history.pushState({section:b},"gordon koo",a)};this.hasPushState=typeof history.pushState!=="undefined";return this})(),Homepage=function(a){this.sectionBtnWrapper=document.getElementById("sectionBtnWrapper");this.changeSection=(function(d){var b=400,f=d.section,c=d.push,e;if(!historyManager.hasPushState){window.location=f?f+".html":"/";return}if(f){this.navView.hide(b);setTimeout((function(){this.contentView.showSection(f)}).bind(this),b)}else{this.contentView.hide();this.navView.show()}if(c){historyManager.navigateTo(f)}}).bind(this);this.init=function(){var b=a==="home"?"/":"/"+a+".html";this.navView=new NavView();this.contentView=new ContentView();historyManager.initialize(a,b);eventManager.bind("navigate",this.changeSection)};this.init()};if(typeof Function.bind==="undefined"){Function.prototype.bind=function(b){var a=this;return function(){var c=Array.prototype.slice.call(arguments);return a.apply(b||null,c)}}}document.body.onload=function(){var a;if(typeof currPage==="undefined"){currPage="home"}a=new Homepage(currPage)};
